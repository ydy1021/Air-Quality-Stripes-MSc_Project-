{"ast":null,"code":"var _jsxFileName = \"E:\\\\Master2\\\\FYP\\\\Global\\\\Global\\\\dashboard_ComparisionVersion\\\\src\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson-client';\nimport PM25DataLoader from './PM25DataLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WORLD_GEOJSON_URL = 'world-110m.geojson';\nconst CITIES_JSON = 'cities_with_coords.json';\n\n// PM2.5色阶区间和颜色，与MultiTrendCharts.js保持一致\nconst bounds = [0, 5, 10, 15, 20, 30, 40, 50, 60, 70, 80, 90, 99999];\nconst c_list = ['rgb(164,255,255)',\n// 0 - 5\n'rgb(176,218,233)',\n// 5 - 10\n'rgb(176,206,237)',\n// 10 - 15\n'rgb(249,224,71)',\n// 15 - 20\n'rgb(242,200,75)',\n// 20 - 30\n'rgb(241,166,63)',\n// 30 - 40\n'rgb(233,135,37)',\n// 40 - 50\n'rgb(175,69,83)',\n// 50 - 60\n'rgb(134,59,71)',\n// 60 - 70\n'rgb(103,58,61)',\n// 70 - 80\n'rgb(70,47,48)',\n// 80 - 90\n'rgb(37,36,36)' // 90+\n];\nfunction getColor(val) {\n  if (val === null || val === undefined || isNaN(val)) return '#e0e0e0';\n  for (let i = 0; i < bounds.length - 1; ++i) {\n    if (val >= bounds[i] && val < bounds[i + 1]) return c_list[i];\n  }\n  return c_list[c_list.length - 1];\n}\nfunction Map({\n  onCitySelect,\n  selectedCities,\n  maxCities = 2\n}) {\n  _s();\n  const svgRef = useRef();\n  const [cities, setCities] = useState([]);\n  const [world, setWorld] = useState(null);\n  const [pm25Loader, setPm25Loader] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // 加载数据\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setIsLoading(true);\n\n        // 并行加载地图和城市数据\n        const [worldData, citiesData] = await Promise.all([d3.json(WORLD_GEOJSON_URL), d3.json(CITIES_JSON)]);\n        setWorld(worldData);\n        setCities(citiesData);\n\n        // 加载PM2.5数据\n        const loader = new PM25DataLoader();\n        const success = await loader.loadData();\n        if (success) {\n          setPm25Loader(loader);\n          console.log('PM2.5 data stats:', loader.getDataStats());\n        } else {\n          console.warn('PM2.5 data loading failed, using default colors');\n        }\n      } catch (error) {\n        console.error('Error loading data:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadData();\n  }, []);\n\n  // 获取地理位置的PM2.5值\n  const getPM25ForLocation = (lat, lon) => {\n    if (!pm25Loader) return null;\n    return pm25Loader.getPM25Value(lat, lon);\n  };\n\n  // 绘制地图\n  useEffect(() => {\n    if (!world || !cities.length || isLoading) return;\n    const width = 1000,\n      height = 500;\n    const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n    svg.selectAll('*').remove();\n\n    // 投影\n    const projection = d3.geoNaturalEarth1().fitSize([width, height], world);\n    const path = d3.geoPath().projection(projection);\n\n    // 首先绘制基础地图（作为背景）\n    svg.append('g').selectAll('path').data(world.features).enter().append('path').attr('d', path).attr('fill', '#f0f0f0').attr('stroke', '#ccc').attr('stroke-width', 0.5);\n\n    // 绘制PM2.5网格\n    if (pm25Loader && pm25Loader.data) {\n      console.log('Drawing PM2.5 grid...');\n\n      // 性能优化：降低网格密度和视口裁剪\n      const gridData = pm25Loader.data.data;\n      const samplingRate = 3; // 每3个点取1个，进一步降低密度\n\n      // 筛选数据：降采样 + 视口裁剪\n      const filteredData = gridData.filter((d, index) => {\n        // 降采样：只取部分点\n        if (index % samplingRate !== 0) return false;\n\n        // 视口裁剪：只渲染地图范围内的点\n        const projected = projection([d.lon, d.lat]);\n        if (!projected) return false;\n        const [x, y] = projected;\n        return x >= -50 && x <= width + 50 && y >= -50 && y <= height + 50;\n      });\n      console.log(`Rendering ${filteredData.length} grid points (from ${gridData.length} total)`);\n      svg.append('g').selectAll('rect').data(filteredData).enter().append('rect').attr('x', d => {\n        const projected = projection([d.lon, d.lat]);\n        return projected[0] - 3; // 增大网格大小补偿密度降低\n      }).attr('y', d => {\n        const projected = projection([d.lon, d.lat]);\n        return projected[1] - 3;\n      }).attr('width', 6) // 增大网格大小\n      .attr('height', 6).attr('fill', d => getColor(d.value)).attr('opacity', 0.7).append('title').text(d => `PM2.5: ${d.value.toFixed(1)} µg/m³\\nLat: ${d.lat.toFixed(2)}°, Lon: ${d.lon.toFixed(2)}°`);\n    }\n\n    // 重新绘制国家边界（在网格之上）\n    svg.append('g').selectAll('path').data(world.features).enter().append('path').attr('d', path).attr('fill', 'none').attr('stroke', '#666').attr('stroke-width', 0.8).append('title').text(d => {\n      const countryName = d.properties.NAME || d.properties.name || 'Unknown';\n      const centroid = d3.geoCentroid(d);\n      const [lon, lat] = centroid;\n      const pm25Value = getPM25ForLocation(lat, lon);\n      return pm25Value !== null ? `${countryName}\\nCenter PM2.5 (2022): ${pm25Value.toFixed(1)} µg/m³` : `${countryName}`;\n    });\n\n    // 绘制城市点\n    svg.append('g').selectAll('circle').data(cities).enter().append('circle').attr('cx', d => projection([d.lng, d.lat])[0]).attr('cy', d => projection([d.lng, d.lat])[1]).attr('r', 4).attr('fill', d => selectedCities.find(c => c.city === d.city && c.country === d.country) ? '#d32f2f' : '#1976d2').attr('stroke', '#fff').attr('stroke-width', 2).style('cursor', 'pointer').on('click', (event, d) => {\n      onCitySelect(d);\n    }).append('title').text(d => {\n      const pm25Value = getPM25ForLocation(d.lat, d.lng);\n      return pm25Value !== null ? `${d.city}, ${d.country}\\nPM2.5 (2022): ${pm25Value.toFixed(1)} µg/m³` : `${d.city}, ${d.country}\\nPM2.5: No data`;\n    });\n\n    // 添加色阶图例\n    if (pm25Loader) {\n      const legendWidth = 300;\n      const legendHeight = 20;\n      const legendX = width - legendWidth - 20;\n      const legendY = height - 60;\n\n      // 图例背景\n      svg.append('rect').attr('x', legendX - 10).attr('y', legendY - 25).attr('width', legendWidth + 20).attr('height', 50).attr('fill', 'white').attr('stroke', '#ccc').attr('rx', 5);\n\n      // 色阶条\n      const legendScale = d3.scaleLinear().domain([0, bounds.length - 2]).range([0, legendWidth]);\n      svg.append('g').selectAll('rect').data(c_list.slice(0, -1)) // 排除最后一个颜色（90+）\n      .enter().append('rect').attr('x', (d, i) => legendX + legendScale(i)).attr('y', legendY).attr('width', legendWidth / (c_list.length - 1)).attr('height', legendHeight).attr('fill', d => d);\n\n      // 图例标题\n      svg.append('text').attr('x', legendX).attr('y', legendY - 5).attr('font-size', 12).attr('font-weight', 'bold').text('PM2.5 Concentration (µg/m³) - 2022');\n\n      // 数值标签\n      const labelValues = [0, 10, 20, 30, 50, 70, 90];\n      svg.append('g').selectAll('text').data(labelValues).enter().append('text').attr('x', d => {\n        const index = bounds.findIndex(b => b >= d);\n        return legendX + legendScale(Math.max(0, index));\n      }).attr('y', legendY + legendHeight + 15).attr('text-anchor', 'middle').attr('font-size', 10).text(d => d);\n    }\n  }, [world, cities, selectedCities, onCitySelect, maxCities, pm25Loader, isLoading]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: 20,\n        color: '#666'\n      },\n      children: \"Loading PM2.5 data and map...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8,\n        color: '#888'\n      },\n      children: pm25Loader ? ' Map colored by PM2.5 concentration (2022). ' : '* Loading PM2.5 data for map coloring...'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n}\n_s(Map, \"7SNprK5oFr2S0fgU7PdoHZD+05g=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","topojson","PM25DataLoader","jsxDEV","_jsxDEV","WORLD_GEOJSON_URL","CITIES_JSON","bounds","c_list","getColor","val","undefined","isNaN","i","length","Map","onCitySelect","selectedCities","maxCities","_s","svgRef","cities","setCities","world","setWorld","pm25Loader","setPm25Loader","isLoading","setIsLoading","loadData","worldData","citiesData","Promise","all","json","loader","success","console","log","getDataStats","warn","error","getPM25ForLocation","lat","lon","getPM25Value","width","height","svg","select","current","attr","selectAll","remove","projection","geoNaturalEarth1","fitSize","path","geoPath","append","data","features","enter","gridData","samplingRate","filteredData","filter","d","index","projected","x","y","value","text","toFixed","countryName","properties","NAME","name","centroid","geoCentroid","pm25Value","lng","find","c","city","country","style","on","event","legendWidth","legendHeight","legendX","legendY","legendScale","scaleLinear","domain","range","slice","labelValues","findIndex","b","Math","max","textAlign","children","margin","color","fileName","_jsxFileName","lineNumber","columnNumber","ref","marginTop","_c","$RefreshReg$"],"sources":["E:/Master2/FYP/Global/Global/dashboard_ComparisionVersion/src/Map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\nimport * as topojson from 'topojson-client';\r\nimport PM25DataLoader from './PM25DataLoader';\r\n\r\nconst WORLD_GEOJSON_URL = 'world-110m.geojson';\r\nconst CITIES_JSON = 'cities_with_coords.json';\r\n\r\n// PM2.5色阶区间和颜色，与MultiTrendCharts.js保持一致\r\nconst bounds = [0, 5, 10, 15, 20, 30, 40, 50, 60, 70, 80, 90, 99999];\r\nconst c_list = [\r\n  'rgb(164,255,255)',  // 0 - 5\r\n  'rgb(176,218,233)',  // 5 - 10\r\n  'rgb(176,206,237)',  // 10 - 15\r\n  'rgb(249,224,71)',   // 15 - 20\r\n  'rgb(242,200,75)',   // 20 - 30\r\n  'rgb(241,166,63)',   // 30 - 40\r\n  'rgb(233,135,37)',   // 40 - 50\r\n  'rgb(175,69,83)',    // 50 - 60\r\n  'rgb(134,59,71)',    // 60 - 70\r\n  'rgb(103,58,61)',    // 70 - 80\r\n  'rgb(70,47,48)',     // 80 - 90\r\n  'rgb(37,36,36)',     // 90+\r\n];\r\n\r\nfunction getColor(val) {\r\n  if (val === null || val === undefined || isNaN(val)) return '#e0e0e0';\r\n  for (let i = 0; i < bounds.length - 1; ++i) {\r\n    if (val >= bounds[i] && val < bounds[i + 1]) return c_list[i];\r\n  }\r\n  return c_list[c_list.length - 1];\r\n}\r\n\r\nfunction Map({ onCitySelect, selectedCities, maxCities = 2 }) {\r\n  const svgRef = useRef();\r\n  const [cities, setCities] = useState([]);\r\n  const [world, setWorld] = useState(null);\r\n  const [pm25Loader, setPm25Loader] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // 加载数据\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        \r\n        // 并行加载地图和城市数据\r\n        const [worldData, citiesData] = await Promise.all([\r\n          d3.json(WORLD_GEOJSON_URL),\r\n          d3.json(CITIES_JSON)\r\n        ]);\r\n        \r\n        setWorld(worldData);\r\n        setCities(citiesData);\r\n        \r\n        // 加载PM2.5数据\r\n        const loader = new PM25DataLoader();\r\n        const success = await loader.loadData();\r\n        if (success) {\r\n          setPm25Loader(loader);\r\n          console.log('PM2.5 data stats:', loader.getDataStats());\r\n        } else {\r\n          console.warn('PM2.5 data loading failed, using default colors');\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('Error loading data:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    loadData();\r\n  }, []);\r\n\r\n  // 获取地理位置的PM2.5值\r\n  const getPM25ForLocation = (lat, lon) => {\r\n    if (!pm25Loader) return null;\r\n    return pm25Loader.getPM25Value(lat, lon);\r\n  };\r\n\r\n  // 绘制地图\r\n  useEffect(() => {\r\n    if (!world || !cities.length || isLoading) return;\r\n    \r\n    const width = 1000, height = 500;\r\n    const svg = d3.select(svgRef.current)\r\n      .attr('width', width)\r\n      .attr('height', height);\r\n    svg.selectAll('*').remove();\r\n\r\n    // 投影\r\n    const projection = d3.geoNaturalEarth1().fitSize([width, height], world);\r\n    const path = d3.geoPath().projection(projection);\r\n\r\n    // 首先绘制基础地图（作为背景）\r\n    svg.append('g')\r\n      .selectAll('path')\r\n      .data(world.features)\r\n      .enter()\r\n      .append('path')\r\n      .attr('d', path)\r\n      .attr('fill', '#f0f0f0')\r\n      .attr('stroke', '#ccc')\r\n      .attr('stroke-width', 0.5);\r\n\r\n    // 绘制PM2.5网格\r\n    if (pm25Loader && pm25Loader.data) {\r\n      console.log('Drawing PM2.5 grid...');\r\n      \r\n      // 性能优化：降低网格密度和视口裁剪\r\n      const gridData = pm25Loader.data.data;\r\n      const samplingRate = 3; // 每3个点取1个，进一步降低密度\r\n      \r\n      // 筛选数据：降采样 + 视口裁剪\r\n      const filteredData = gridData.filter((d, index) => {\r\n        // 降采样：只取部分点\r\n        if (index % samplingRate !== 0) return false;\r\n        \r\n        // 视口裁剪：只渲染地图范围内的点\r\n        const projected = projection([d.lon, d.lat]);\r\n        if (!projected) return false;\r\n        \r\n        const [x, y] = projected;\r\n        return x >= -50 && x <= width + 50 && y >= -50 && y <= height + 50;\r\n      });\r\n      \r\n      console.log(`Rendering ${filteredData.length} grid points (from ${gridData.length} total)`);\r\n      \r\n      svg.append('g')\r\n        .selectAll('rect')\r\n        .data(filteredData)\r\n        .enter()\r\n        .append('rect')\r\n        .attr('x', d => {\r\n          const projected = projection([d.lon, d.lat]);\r\n          return projected[0] - 3; // 增大网格大小补偿密度降低\r\n        })\r\n        .attr('y', d => {\r\n          const projected = projection([d.lon, d.lat]);\r\n          return projected[1] - 3;\r\n        })\r\n        .attr('width', 6) // 增大网格大小\r\n        .attr('height', 6)\r\n        .attr('fill', d => getColor(d.value))\r\n        .attr('opacity', 0.7)\r\n        .append('title')\r\n        .text(d => `PM2.5: ${d.value.toFixed(1)} µg/m³\\nLat: ${d.lat.toFixed(2)}°, Lon: ${d.lon.toFixed(2)}°`);\r\n    }\r\n\r\n    // 重新绘制国家边界（在网格之上）\r\n    svg.append('g')\r\n      .selectAll('path')\r\n      .data(world.features)\r\n      .enter()\r\n      .append('path')\r\n      .attr('d', path)\r\n      .attr('fill', 'none')\r\n      .attr('stroke', '#666')\r\n      .attr('stroke-width', 0.8)\r\n      .append('title')\r\n      .text(d => {\r\n        const countryName = d.properties.NAME || d.properties.name || 'Unknown';\r\n        const centroid = d3.geoCentroid(d);\r\n        const [lon, lat] = centroid;\r\n        const pm25Value = getPM25ForLocation(lat, lon);\r\n        return pm25Value !== null \r\n          ? `${countryName}\\nCenter PM2.5 (2022): ${pm25Value.toFixed(1)} µg/m³`\r\n          : `${countryName}`;\r\n      });\r\n\r\n    // 绘制城市点\r\n    svg.append('g')\r\n      .selectAll('circle')\r\n      .data(cities)\r\n      .enter()\r\n      .append('circle')\r\n      .attr('cx', d => projection([d.lng, d.lat])[0])\r\n      .attr('cy', d => projection([d.lng, d.lat])[1])\r\n      .attr('r', 4)\r\n      .attr('fill', d => selectedCities.find(c => c.city === d.city && c.country === d.country) ? '#d32f2f' : '#1976d2')\r\n      .attr('stroke', '#fff')\r\n      .attr('stroke-width', 2)\r\n      .style('cursor', 'pointer')\r\n      .on('click', (event, d) => {\r\n        onCitySelect(d);\r\n      })\r\n      .append('title')\r\n      .text(d => {\r\n        const pm25Value = getPM25ForLocation(d.lat, d.lng);\r\n        return pm25Value !== null \r\n          ? `${d.city}, ${d.country}\\nPM2.5 (2022): ${pm25Value.toFixed(1)} µg/m³`\r\n          : `${d.city}, ${d.country}\\nPM2.5: No data`;\r\n      });\r\n\r\n    // 添加色阶图例\r\n    if (pm25Loader) {\r\n      const legendWidth = 300;\r\n      const legendHeight = 20;\r\n      const legendX = width - legendWidth - 20;\r\n      const legendY = height - 60;\r\n\r\n      // 图例背景\r\n      svg.append('rect')\r\n        .attr('x', legendX - 10)\r\n        .attr('y', legendY - 25)\r\n        .attr('width', legendWidth + 20)\r\n        .attr('height', 50)\r\n        .attr('fill', 'white')\r\n        .attr('stroke', '#ccc')\r\n        .attr('rx', 5);\r\n\r\n      // 色阶条\r\n      const legendScale = d3.scaleLinear()\r\n        .domain([0, bounds.length - 2])\r\n        .range([0, legendWidth]);\r\n\r\n      svg.append('g')\r\n        .selectAll('rect')\r\n        .data(c_list.slice(0, -1)) // 排除最后一个颜色（90+）\r\n        .enter()\r\n        .append('rect')\r\n        .attr('x', (d, i) => legendX + legendScale(i))\r\n        .attr('y', legendY)\r\n        .attr('width', legendWidth / (c_list.length - 1))\r\n        .attr('height', legendHeight)\r\n        .attr('fill', d => d);\r\n\r\n      // 图例标题\r\n      svg.append('text')\r\n        .attr('x', legendX)\r\n        .attr('y', legendY - 5)\r\n        .attr('font-size', 12)\r\n        .attr('font-weight', 'bold')\r\n        .text('PM2.5 Concentration (µg/m³) - 2022');\r\n\r\n      // 数值标签\r\n      const labelValues = [0, 10, 20, 30, 50, 70, 90];\r\n      svg.append('g')\r\n        .selectAll('text')\r\n        .data(labelValues)\r\n        .enter()\r\n        .append('text')\r\n        .attr('x', d => {\r\n          const index = bounds.findIndex(b => b >= d);\r\n          return legendX + legendScale(Math.max(0, index));\r\n        })\r\n        .attr('y', legendY + legendHeight + 15)\r\n        .attr('text-anchor', 'middle')\r\n        .attr('font-size', 10)\r\n        .text(d => d);\r\n    }\r\n  }, [world, cities, selectedCities, onCitySelect, maxCities, pm25Loader, isLoading]);\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      {isLoading && (\r\n        <div style={{ margin: 20, color: '#666' }}>\r\n          Loading PM2.5 data and map...\r\n        </div>\r\n      )}\r\n      <svg ref={svgRef}></svg>\r\n      <div style={{marginTop: 8, color: '#888'}}>\r\n        {pm25Loader ? \r\n          ' Map colored by PM2.5 concentration (2022). ' :\r\n          '* Loading PM2.5 data for map coloring...'\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Map; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}